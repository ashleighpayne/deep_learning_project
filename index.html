<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deep Learning Project</title>

  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    </style>

    <script>
    function saveTokenAsFile(access_token)
    {
        var textFileAsBlob = new Blob([access_token], {type:'text/plain'});
          var downloadLink = document.createElement("a");
        downloadLink.download = 'Access_Token.txt';
        downloadLink.innerHTML = "Download File";
        if (window.webkitURL != null)
        {
            // Chrome allows the link to be clicked
            // without actually adding it to the DOM.
            downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
        }
        else
        {
            // Firefox requires the link to be added to the DOM
            // before it can be clicked.
            downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
            downloadLink.onclick = destroyClickedElement;
            downloadLink.style.display = "none";
            document.body.appendChild(downloadLink);
        }

        downloadLink.click();
    }

    function getHashParams() {
      var hashParams = {};
      var e, r = /([^&;=]+)=?([^&;]*)/g,
          q = window.location.hash.substring(1);
      while ( e = r.exec(q)) {
         hashParams[e[1]] = decodeURIComponent(e[2]);
      }
      return hashParams;

    }


    </script>

</head>

<body>

  <div class="container">
    <h1>Please Log In and Download you access Token :)</h1>
    <a href="/login" class="btn btn-primary">Log in with Spotify</a>
    <button onclick="saveTokenAsFile(getHashParams().access_token)">Download Access Token</button>


  </div>

</body>
</html>
